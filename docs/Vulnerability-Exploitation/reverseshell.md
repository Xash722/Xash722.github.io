---
title: Reverse shell
parent: Vulnerability Exploitation
nav_order: 7
---

# Reverse shell
<br>
대상 시스템에서 공격자의 시스템으로 연결을 생성하는 쉘 접근 방식

<br>

## msfvenom을 이용한 reverse shell 생성
<br>

![리버스 쉘 생성](\assets\images\reverseshell\rev01_생성.png)
리버스 쉘 생성
{: .text-center}

<br>
reverse shell이 접속할 위치는 내 IP 주소, 리눅스의 elf 실행파일 형식으로, revshell 이름으로 생성했다.
<br><br>

![업로드](\assets\images\reverseshell\rev02_업로드.png)
리버스 쉘 업로드
{: .text-center}
<br>

> reverse shell 실습이므로 대상 서버의 root 계정은 이미 알고 있다고 가정했다.

<br>

![권한수정](\assets\images\reverseshell\rev03_권한수정.png)
{: .text-center}
권한 수정
{: .text-center}

<br>
업로드가 정상적으로 된 것을 확인하고 실행 권한을 준다.
<br><br>

![포트오픈](\assets\images\reverseshell\rev04_포트오픈.png)
포트오픈
{: .text-center}
<br>
내 시스템으로 돌아와서 msfvenom으로 생성할 때 설정했던 1234번 포트를 열고 대상 시스템에 업로드 시킨 reverseshell을 실행하면 reverse shell 연결이 성공한 것을 확인할 수 있다.

![연결 성공](\assets\images\reverseshell\rev05_성공.png)
연결 성공
{: .text-center}

---------------------------------------------------------------
### wireshark 패킷 확인

<br>

![wireshark 패킷 확인](\assets\images\reverseshell\rev06_wireshark.png)
wireshark 패킷 확인
{: .text-center}
<br>
설정한 페이로드로 인해 TCP의 3-way handshake 방식으로 연결됨을 확인할 수 있다.

---------------------------------------------------------------

## 커맨드를 이용한 reverse shell

<br><br>

![python 존재여부 확인](\assets\images\reverseshell\rev09_python존재여부확인.png)
{: .text-center}
python 존재여부 확인
{: .text-center}

<br>
Reverse shell 스크립트를 선택하기 위해서는 타겟 시스템에 설치되어있는 인터프리터나 사용 가능한 명령어를 먼저 알아둬야 한다.
python이 존재하다는 것을 알았으니 python 스크립트를 선택하자.
<br><br>

![python 스크립트 선택](\assets\images\reverseshell\rev10_revshellscom.png)
python 스크립트 선택
{: .text-center}

<br>

해당 스크립트를 파이썬 버전, IP주소와 포트번호를 각각 맞게 수정한 후 입력한다.
<br><br>

![python 스크립트 성공](\assets\images\reverseshell\rev11_성공.png)
python 스크립트 성공
{: .text-center}
<br>
python 스크립트를 이용한 reverse shell 접속 성공

<br><br>

### bash 스크립트로도 가능했다.

<br>

![revshells.com](\assets\images\reverseshell\rev07_revshellscom.png)
revshells.com
{: .text-center}

<br>

![접속 성공](\assets\images\reverseshell\rev08_성공.png)
접속 성공
{: .text-center}

