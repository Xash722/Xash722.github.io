---
title: MySQL 취약점 진단
parent: Vulnerability Assessment
nav_order: 2
---

# MySQL 취약점 진단

## MySQL
> 오픈소스 관계형 데이터베이스 관리 시스템

## 취약점 진단
1. 버전 정보 및 호스트 이름 확인
2. 접근 제어 및 기본 계정 정보
    > root:root\
    > root:password\
    > dbadmin:password
3. 원격으로 접속이 가능한 경우\
    > 데이터 탈취 가능 여부 확인\
    > 비밀번호 해시화 유무 확인\
    > 해시 알고리즘 취약성 유무 확인 &rarr; 해시 크래킹
4. 계정 정보를 탈취했다면 해당 계정 정보를 다른 서비스에도 사용 가능한지(credential stuffing)


## 실습
포트스캔

``` nmap -p- -sV -sC <IP주소> --open -oA tcpdetailed```
{: .fs-6 .text-center}

취약점 진단을 할 대상 타겟의 모든 포트를 대상으로 스캔하여 열린 포트에 대해 서비스 버전 정보를 탐지하고 기본 스크립트를 실행해 추가 정보를 수집한 후 결과를 tcpdetailed라는 이름으로 저장했다.

![스캔결과](\assets\images\mysql\mysql1_스캔결과.png)
스캔결과
{: .text-center}

33060, 33061 포트에서 mysql 서비스가 돌아가고 있는 것이 확인됐다.
따라서 33060, 33061번 포트에 대해 상세 스캔을 진행했다.

```nmap -p 33060,33061 -sV -sC --script='mysql*' <IP주소>  ```
{: .fs-6 .text-center}

![상세스캔결과](\assets\images\mysql\mysql2_상세스캔결과.png)
상세 스캔결과
{: .text-center}

mysql-enum 이라는 NSE 스크립트를 통해 접속 가능한 계정정보를 획득했다.
실제로 접속 가능한지 확인한다.

## MySQL 접속

![mysql접속시도1](\assets\images\mysql\mysql3_접속시도1.png)
mysql 접속시도1
{: .text-center}

하지만 접속 불가했다. 이를 통해 nmap은 거짓 양성 반응을 반환했다는 걸 알았다.
이번엔 `root:root`, `root:password` 같은 기본적으로 설정되어 있을만한 계정으로 접속해보겠다.

![mysql접속시도2](\assets\images\mysql\mysql4_접속시도2.png)
mysql 접속시도2
{: .text-center}

TLS/SSL 에러로 인해 연결 불가인 상황이므로

![mysql접속시도3](\assets\images\mysql\mysql5_접속시도3.png)
mysql 접속시도3
{: .text-center}

SSL 연결 없이 접속을 시도했더니 접속 성공했다.

![계정정보획득](\assets\images\mysql\mysql6_계정정보획득.png)
계정정보획득
{: .text-center}

### 해시 알고리즘 취약성 유무 확인

> 획득한 해시암호
>> 36cdf8b887a5cffc78dcd5c08991b993\
>> cebdd715d4ecaafee8f147c2e85e0754\
>> d9eaabe53adedb62bc74b7eb0a9477d4\
>> 45fb45cd49d4fffa0c72db7e59450d4f\
>> a1e7f048b6ec3c6ff2b7bdbe51086bee

이 해시암호들에 대한 해시 크래킹 기법은 다음 게시글에서 살펴본다.

[해시크래킹](/docs/Vulnerability-Exploitation/해시크래킹)