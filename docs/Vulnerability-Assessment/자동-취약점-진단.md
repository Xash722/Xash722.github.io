---
title: 자동 취약점 진단
parent: Vulnerability Assessment
nav_order: 3
---

# 자동 취약점 진단

## 취약점 진단 스캐너

> 알려진 취약점 및 잘못된 설정들을 자동으로 찾아주는 솔루션, 툴, 스크립트


## 자동화 vs 수동 진단

- 자동화 진단 : 넓은 범위 커버
- 수동 진단 : 검증, 거짓 양성/거짓 음성 결과 확인
- 자동화 진단과 수동 진단 병행

## 스캐너들의 약점

- 취약점 연계를 통한 공격 경로 생성 불가
- 배경 상황, 맥락을 이용한 공격 불가
- 이미 발견된 취약점들만 개념 증명용 코드로 확인 가능
- 거짓 양성, 거짓 음성 결과 등의 정확도 문제가 있음

&rarr; 수동 진단 필수

## 스캐너 종류

| 스캐너 이름   | 설명                                                                 |
|------------|----------------------------------------------------------------------|
| Nessus     | 네트워크 취약점 스캐너                                               |
| Burpsuite  | 웹 애플리케이션을 대상으로 하는 대표적인 도구                         |
| Nuclei     | YAML 기반의 템플릿 엔진을 사용하는 유연한 고속 취약점 스캐너           |
| Nikto      | 웹 서버 관련 취약점에 특화된 스캐너                                  |
| ZAP        | OWASP에서 제공하는 오픈소스 웹 애플리케이션 스캐너                    |
| BloodHound Enterprise | Active Directory 환경에서 공격 경로를 시각적으로 분석하는 툴 |

등등...

## 실습

## Nuclei 툴 실습

> nuclei -u http[s]://<ip>:<port> -as

> nuclei -u <ip>:<port> -et http/

> -as 옵션은 nuclei 가 타겟 웹서버/애플리케이션의 기술스택을 자동적으로 판단한 뒤 알맞은 양식을
> 사용하도록 하는 매우 효율적인 옵션이다.

> -et 옵션은 타겟 시스템이 웹서버/애플리케이션이 아닌 ssh, ftp, nfs, smb 등을 스캐닝할 경우
> -et http/ 옵션을 사용해 웹(http)과 관련된 양식을 모두 제외한채 스캐닝을 진행한다.

![nuclei실행결과](\assets\images\auto1_nuclei실행결과.png)
nuclei 실행결과
{: .text-center}

nuclei 로 획득한 정보
1. [default-sql-dump] [http] [medium] http://172.31.135.250:8081/dump.sql [paths="/dump.sql"]
2. [phpinfo-files] [http] [low] http://172.31.135.250:8081/info.php ["7.1.11"] [paths="/info.php"]


### 1.

```[default-sql-dump] [http] [medium] http://172.31.135.250:8081/dump.sql [paths="/dump.sql"]```
{: .fs-6 .text-center}

해당 주소로 접속하면 dump.sql 파일이 그대로 다운로드 된다.

![dump.sql](\assets\images\auto2_dump_sql.png)
획득한 dump.sql 파일
{: .text-center}

이 파일을 통해 editor와 choi 비밀번호와 그 비밀번호를 MD5로 해싱한다는 정보를 알게 되었다.

### 2.

```[phpinfo-files] [http] [low] http://172.31.135.250:8081/info.php ["7.1.11"] [paths="/info.php"]```
{: .fs-6 .text-center}

위의 주소로 이동하면 

![info.php](\assets\images\auto3_info_php.png)
info.php
{: .text-center}

php 환경 정보가 노출된다.

## nikto

``` nikto -host <url> ```
{: .fs-6}

![nikto결과](\assets\images\auto4_nikto.png)
취약한 2.4.10 버전의 apache를 사용 중이라는 점, dump.sql 파일 노출, license.txt 파일 노출, info.php 페이지 노출 등의 여러 취약점들을 발견했다.